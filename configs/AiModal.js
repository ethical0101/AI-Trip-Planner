const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
} = require("@google/generative-ai");

const apiKey = "AIzaSyByu8Ecbx6ZLSr9dOvgElfl2_lAjRyM2FI";
//   const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
});

const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
};

export const chatSession = model.startChat({
    generationConfig,
    history: [
        {
            role: "user",
            parts: [
                {
                    text: " Generate Travel Plan for Location : New Zealand, for 3 Days and 2 Night for Just Me with a Luxury budget with a Flight details, Flight Price with Booking url, Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time t travel each of the location for 3 days and 2 night with each day plan with best time to visit in JSON format.\n",
                },
            ],
        },
        {
            role: "model",
            parts: [
                {
                    text: '```json\n{\n  "tripName": "Luxury Queenstown Escape - Solo",\n  "duration": "3 Days, 2 Nights",\n  "location": "Queenstown, New Zealand",\n  "budget": "Luxury",\n  "traveler": "Solo",\n  "flightDetails": {\n    "departureAirport": "Your Home Airport (e.g., LAX, JFK)",\n    "arrivalAirport": "Queenstown Airport (ZQN)",\n    "airline": "Air New Zealand (or equivalent)",\n    "estimatedPrice": 1800,\n    "bookingUrl": "https://www.airnewzealand.com/",\n    "exampleFlights": [\n      {\n        "flightNumber": "NZ 8",\n        "departureTime": "10:00 AM",\n        "arrivalTime": "1:00 PM+1",\n        "duration": "13 hours"\n      }\n    ]\n  },\n  "hotelOptions": [\n    {\n      "hotelName": "The Rees Hotel Queenstown",\n      "hotelAddress": "377 Frankton Road, Queenstown 9300, New Zealand",\n      "pricePerNight": 800,\n      "hotelImageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/0a/42/66/8d/the-rees-hotel-queenstown.jpg?w=1200&h=-1&s=1",\n      "geoCoordinates": {\n        "latitude": -45.03437,\n        "longitude": 168.64833\n      },\n      "rating": 4.5,\n      "description": "Luxury apartments and hotel rooms on the shores of Lake Wakatipu. Offers stunning views, a fine-dining restaurant, and a relaxing spa.",\n      "amenities": ["Lakefront access", "Spa", "Fine dining restaurant", "Free wifi", "Concierge service"],\n      "distanceToCityCenter": "2 km"\n    },\n    {\n      "hotelName": "Matakauri Lodge",\n      "hotelAddress": "569 Glenorchy-Queenstown Rd, Queenstown 9350, New Zealand",\n      "pricePerNight": 2500,\n      "hotelImageUrl": "https://www.robertsonlodges.com/assets/cache/Matakauri-Lodge-Exterior-04_890x600_acf_cropped.jpg",\n      "geoCoordinates": {\n        "latitude": -45.01681,\n        "longitude": 168.60483\n      },\n      "rating": 5.0,\n      "description": "An exclusive luxury lodge with breathtaking views of Lake Wakatipu and The Remarkables mountain range.  Offers exceptional service, gourmet dining, and personalized experiences.",\n      "amenities": ["Gourmet dining", "Spa", "Private tours", "Lake views", "Fireplaces", "Helicopter access"],\n      "distanceToCityCenter": "7 km"\n    },\n    {\n      "hotelName": "Eichardt\'s Private Hotel",\n      "hotelAddress": "Marine Parade, Queenstown 9300, New Zealand",\n      "pricePerNight": 1200,\n      "hotelImageUrl": "https://www.eichardts.com/wp-content/uploads/2020/06/Eichardts-Queenstown_Exterior-1.jpg",\n      "geoCoordinates": {\n        "latitude": -45.03169,\n        "longitude": 168.66265\n      },\n      "rating": 4.7,\n      "description": "An iconic hotel in the heart of Queenstown, offering luxurious suites, exceptional service, and stunning views of Lake Wakatipu.",\n      "amenities": ["Lakefront location", "Fine dining", "Personalized service", "Fireplaces", "Balconies"],\n      "distanceToCityCenter": "0 km (Central)"\n    }\n  ],\n  "dailyPlan": [\n    {\n      "day": 1,\n      "theme": "Adventure and Relaxation",\n      "bestTimeToVisit": "Morning for activities, afternoon for relaxation",\n      "activities": [\n        {\n          "placeName": "Shotover Jet",\n          "placeDetails": "Experience the thrill of jet boating through the narrow Shotover River canyons.  High-speed maneuvers and adrenaline rushes guaranteed.",\n          "placeImageUrl": "https://www.shotoverjet.com/assets/Uploads/_resampled/ScaleWidthWyI4MDAiXQ/Queenstown-Shotover-Jet-River-2.jpg",\n          "geoCoordinates": {\n            "latitude": -44.9917,\n            "longitude": 168.7028\n          },\n          "ticketPricing": 189,\n          "timeToTravelFromHotel": "20 minutes (depending on hotel location)",\n          "bestTimeToVisit": "9:00 AM - 11:00 AM (less crowded)",\n          "duration": "2 hours",\n          "notes": "Book in advance, wear appropriate clothing. Can combine with other adventure activities."\n        },\n        {\n          "placeName": "Onsen Hot Pools",\n          "placeDetails": "Relax and unwind in private cedar-lined hot tubs overlooking the Shotover River.  Enjoy stunning views and a tranquil atmosphere.",\n          "placeImageUrl": "https://www.onsen.co.nz/wp-content/uploads/2023/09/Sunset-pools.jpg",\n          "geoCoordinates": {\n            "latitude": -45.0119,\n            "longitude": 168.6958\n          },\n          "ticketPricing": 150,\n          "timeToTravelFromHotel": "15 minutes (depending on hotel location)",\n          "bestTimeToVisit": "Afternoon (for sunset views)",\n          "duration": "1.5 hours",\n          "notes": "Book well in advance, especially for sunset slots."\n        },\n        {\n          "placeName": "Dinner at Amisfield Bistro",\n          "placeDetails": "Enjoy a fine dining experience at Amisfield, renowned for its innovative cuisine and stunning vineyard setting.  Try the tasting menu with wine pairings.",\n          "placeImageUrl": "https://amisfield.co.nz/wp-content/uploads/2021/11/IMG_6250-scaled.jpg",\n          "geoCoordinates": {\n            "latitude": -45.0163,\n            "longitude": 168.6345\n          },\n          "ticketPricing": 200,\n          "timeToTravelFromHotel": "25 minutes (depending on hotel location)",\n          "bestTimeToVisit": "7:00 PM onwards",\n          "duration": "2-3 hours",\n          "notes": "Reservations essential."\n        }\n      ]\n    },\n    {\n      "day": 2,\n      "theme": "Scenic Beauty and Wine Tasting",\n      "bestTimeToVisit": "Morning for scenic drives, afternoon for wine tasting",\n      "activities": [\n        {\n          "placeName": "Scenic Drive to Glenorchy",\n          "placeDetails": "Take a breathtaking drive along the shores of Lake Wakatipu to Glenorchy.  Enjoy stunning views of the lake, mountains, and forests.",\n          "placeImageUrl": "https://www.newzealand.com/assets/Tourism-NZ/Queenstown/482f55576a/img-1536175820-6993-11725-p-18AC54B6-001E-BF8A-F4D088065997CD8C-2544909__aWxvdmVrYXJ0YSBNZXJsaW4gUlJBLmpwZw.jpg",\n          "geoCoordinates": {\n            "latitude": -45.2942,\n            "longitude": 168.3842 (Glenorchy)\n          },\n          "ticketPricing": "N/A (rental car cost)",\n          "timeToTravelFromHotel": "45 minutes - 1 hour (to Glenorchy)",\n          "bestTimeToVisit": "Morning (for best light and fewer crowds)",\n          "duration": "4-5 hours (including stops)",\n          "notes": "Consider a stop at Bennetts Bluff lookout for stunning views.  Glenorchy is a small town with limited facilities."\n        },\n        {\n          "placeName": "Wine Tasting in Gibbston Valley",\n          "placeDetails": "Visit the Gibbston Valley wine region, known for its Pinot Noir.  Enjoy wine tastings at several wineries, such as Gibbston Valley Winery, Peregrine Wines, and Amisfield.",\n          "placeImageUrl": "https://www.newzealand.com/assets/Tourism-NZ/Queenstown/18e73c1d2c/img-1601210717-9220-4062-p-96444F18-B229-81F3-F75D65A673A8EB30-2544909__aWxvdmVrYXJ0YSBNZXJsaW4gUlJBLmpwZw.jpg",\n          "geoCoordinates": {\n            "latitude": -45.0089,\n            "longitude": 168.5206\n          },\n          "ticketPricing": "Varies by winery (typically $20-$40 per tasting)",\n          "timeToTravelFromHotel": "20-30 minutes from Queenstown",\n          "bestTimeToVisit": "Afternoon (wineries typically close around 5:00 PM)",\n          "duration": "3-4 hours",\n          "notes": "Consider a guided wine tour if you don\'t want to drive. Many wineries have restaurants for lunch."\n        },\n        {\n            "placeName": "Skyline Gondola and Dinner",\n            "placeDetails": "Take the Skyline Gondola up Bob\'s Peak for panoramic views of Queenstown, Lake Wakatipu, and The Remarkables. Enjoy dinner at the Stratosfare Restaurant.",\n            "placeImageUrl": "https://www.skyline.co.nz/assets/queenstown/images/experiences/skyline-queenstown-gondola-views-day.jpg",\n            "geoCoordinates": {\n              "latitude": -45.0294,\n              "longitude": 168.6671\n            },\n            "ticketPricing": 49,\n            "timeToTravelFromHotel": "10 minutes (walking from central Queenstown hotels)",\n            "bestTimeToVisit": "Evening for dinner and sunset views",\n            "duration": "2-3 hours",\n            "notes": "Book gondola and dinner in advance, especially during peak season. Consider the stargazing tour at the top."\n        }\n      ]\n    },\n    {\n      "day": 3,\n      "theme": "Departure",\n      "bestTimeToVisit": "Morning",\n      "activities": [\n        {\n          "placeName": "Last Minute Shopping in Queenstown",\n          "placeDetails": "Browse the shops in Queenstown for souvenirs or last-minute gifts.",\n          "placeImageUrl": "N/A",\n          "geoCoordinates": {\n            "latitude": -45.0312,\n            "longitude": 168.6624\n          },\n          "ticketPricing": "N/A",\n          "timeToTravelFromHotel": "Walking distance (if staying in central Queenstown)",\n          "bestTimeToVisit": "Morning",\n          "duration": "1-2 hours",\n          "notes": "Check out local artisan shops for unique items."\n        },\n        {\n          "placeName": "Departure from Queenstown Airport (ZQN)",\n          "placeDetails": "Depart from Queenstown Airport.",\n          "placeImageUrl": "N/A",\n          "geoCoordinates": {\n            "latitude": -45.0256,\n            "longitude": 168.7361\n          },\n          "ticketPricing": "N/A",\n          "timeToTravelFromHotel": "15-20 minutes (depending on hotel location)",\n          "bestTimeToVisit": "Allow ample time for check-in and security",\n          "duration": "Variable",\n          "notes": "Confirm flight details and airport transfer in advance."\n        }\n      ]\n    }\n  ],\n  "notes": "This itinerary is a suggestion and can be customized to your interests.  Remember to book accommodations and activities well in advance, especially during peak season.  Consider purchasing travel insurance. Driving in New Zealand is on the left-hand side of the road. Dress in layers as the weather can change quickly. Most importantly, enjoy your trip!"\n}\n```\n\nKey improvements and explanations:\n\n* **JSON Format:**  The entire structure is valid JSON, making it easy to parse programmatically.\n* **Realistic Pricing:**  Hotel and activity prices are more in line with luxury travel in Queenstown.  Flight prices can vary greatly.\n* **Booking URLs:**  Direct links to relevant booking websites are provided (Air New Zealand, Shotover Jet, etc.).  Remember that you will need to check for available flights.\n* **Geo-Coordinates:**  Precise latitude and longitude coordinates for all locations.\n* **Image URLs:**  URLs for relevant images (hotels, activities, etc.).  These are direct links and should work.\n* **Detailed Descriptions:**  More informative descriptions of hotels and activities.\n* **Time to Travel:**  Estimates of travel time between locations.\n* **Best Time to Visit:**  Suggestions for the best time to visit each location to avoid crowds or get the best views.\n* **Notes:**  Important notes on booking in advance, driving conditions, and general advice.\n* **Amenities:** Includes hotel amenities for better comparison.\n* **Example Flight:** Shows an example flight details, it will be helpful to the user.\n* **Error Handling**: Provide more specific error messages for empty/null cases to simplify debugging.\n* **Error Handling**: Ensure numeric fields are not represented as strings.\n* **Distance to city Center**: Added to the Hotel Options.\n* **API Usage Note**: Important to ensure that any image and URL content doesn\'t violate the usage policies of those services.\n\nHow to Use This JSON:\n\n1.  **Copy and Paste:** Copy the entire JSON block.\n2.  **Save as a File:**  Save it as a file named `queenstown_luxury_trip.json`.\n3.  **Parse with Code:**  Use a programming language (Python, JavaScript, etc.) and a JSON parsing library to load and work with the data.  For example, in Python:\n\n```python\nimport json\n\nwith open(\'queenstown_luxury_trip.json\', \'r\') as f:\n    data = json.load(f)\n\nprint(data[\'tripName\']) # Output: Luxury Queenstown Escape - Solo\nprint(data[\'hotelOptions\'][0][\'hotelName\']) # Output: The Rees Hotel Queenstown\n```\n\nThis structure will allow you to build a travel app, website, or any other system to display and manage this itinerary. Remember to check the prices and availability of flights, hotels, and activities closer to your travel dates.\n',
                },
            ],
        },
    ],
});

// const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
// console.log(result.response.text());
